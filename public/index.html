<!DOCTYPE html>
<html lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/css/main.css">
    <link rel="shortcut icon" href="/images/favicon.ico" type="image/x-icon">
  </head>
  <body>
    <div id="drawer" class="use-native-click">
      <nav class="menu-drawer">
        <div>
          <ul>
            <li>
              <div class="logo-wrapper"><a href="/" class="logo">Path To Eagle</a></div>
            </li>
            <li><a href="/">Home</a>
            </li>
            <li class="logged-out-view"><a data-target="loginModal" class="modal trigger">Login</a></li>
            <li class="logged-in-view"><a data-target="logoutModal" class="modal trigger">Logout</a></li>
          </ul>
        </div>
      </nav>
    </div>
    <div id="siteWrapper">
      <div id="open">
        <header>
          <section class="rack">
            <div data-target="body, #siteWrapper, #drawer" class="icon-menu toggle use-native-click"></div>
            <div class="mobile-rack-space">
              <div class="logo-wrapper"><a href="/" class="logo">TheSite</a></div>
            </div>
          </section>
        </header>
        <nav class="desktop-nav dark">
          <ul>
            <li>
                        <div class="logo-wrapper"><a href="/" class="logo">Path To Eagle</a></div>
            </li>
            <li><a href="/">Home</a>
            </li>
            <li class="logged-out-view"><a data-target="loginModal" class="modal trigger">Login</a></li>
            <li class="logged-in-view"><a data-target="logoutModal" class="modal trigger">Logout</a></li>
          </ul>
        </nav>
                  <div class="panel-wrap special light cf">
                    <section class="panel">
                      <div id="loginModal" class="modal window">
                        <div class="wrap access-form">
                          <form id="login" class="logged-out-view">
                            <h3>Login</h3>
                                      <div class="form-element">
                                        <input type="email" data-validate="email" data-required="">
                                        <label>Email</label>
                                      </div>
                                      <div class="form-element">
                                        <input type="password" data-required="">
                                        <label>Password</label>
                                      </div>
                            <p class="right-justify"><a class="submit logged-out-view button">Login</a>
                            </p>
                          </form>
                          <div class="logged-in-view">
                            <p class="center-justify">Congratulations!  You are now logged in.</p>
                          </div>
                          <p class="logged-in-view center-justify"><a class="close-modal-alt button">Close</a>
                          </p>
                        </div>
                      </div>
                      <div id="logoutModal" class="modal window">
                        <div class="wrap logged-in-view">
                          <p class="center-justify">Are you sure that you want to log out?</p>
                          <p class="center-justify"><a class="logout button">Confirm</a>
                          </p>
                        </div>
                        <div class="wrap logged-out-view">
                          <p class="center-justify">You are successfully logged out!</p>
                          <p class="center-justify"><a class="close-modal-alt button">Close</a>
                          </p>
                        </div>
                      </div>
                      <div id="modalWindow" class="modal window">
                                  <div class="segment half">
                                              <div class="segment-max">
                                                <h3> </h3>
                                              </div>
                                              <div class="segment-min">
                                                <div class="requirement-status"></div>
                                              </div>
                                  </div>
                        <div class="rank-content"></div>
                        <div class="notes-wrapper"></div>
                      </div>
                      <div id="scoutWrapper">
                        <div id="selectAll">Batch</div>
                        <div id="keysTrigger">?</div>
                                  <div class="scout">
                                    <div data-name="Praval" class="name">Praval</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Romil" class="name">Romil</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Thirtha" class="name">Thirtha</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Ashis" class="name">Ashis</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Raja" class="name">Raja</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Aiman" class="name">Aiman</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Shishant" class="name">Shishant</div>
                                  </div>
                                  <div class="scout">
                                    <div data-name="Samuel" class="name">Samuel</div>
                                  </div>
                      </div>
                      <div id="progressWrapper">
                        <div id="shadowBarsWrapper">
                                    <div data-owner="Praval" class="shadow-progress-bar"></div>
                                    <div data-owner="Romil" class="shadow-progress-bar"></div>
                                    <div data-owner="Thirtha" class="shadow-progress-bar"></div>
                                    <div data-owner="Ashis" class="shadow-progress-bar"></div>
                                    <div data-owner="Raja" class="shadow-progress-bar"></div>
                                    <div data-owner="Aiman" class="shadow-progress-bar"></div>
                                    <div data-owner="Shishant" class="shadow-progress-bar"></div>
                                    <div data-owner="Samuel" class="shadow-progress-bar"></div>
                        </div>
                        <div id="barsWrapper">
                                    <div data-owner="Praval" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Romil" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Thirtha" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Ashis" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Raja" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Aiman" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Shishant" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                                    <div data-owner="Samuel" data-target="modalWindow" class="progress-bar modal trigger cf"></div>
                        </div>
                        <div id="rankWrapper" class="cf">
                                    <div data-lane="Scout" class="rank">
                                      <h4 class="center-justify">Scout</h4>
                                    </div>
                                    <div data-lane="Tenderfoot" class="rank">
                                      <h4 class="center-justify">Tenderfoot</h4>
                                    </div>
                                    <div data-lane="Second Class" class="rank">
                                      <h4 class="center-justify">Second Class</h4>
                                    </div>
                                    <div data-lane="First Class" class="rank">
                                      <h4 class="center-justify">First Class</h4>
                                    </div>
                                    <div data-lane="Star" class="rank">
                                      <h4 class="center-justify">Star</h4>
                                    </div>
                                    <div data-lane="Life" class="rank">
                                      <h4 class="center-justify">Life</h4>
                                    </div>
                                    <div data-lane="Eagle" class="rank">
                                      <h4 class="center-justify">Eagle</h4>
                                    </div>
                        </div>
                      </div>
                      <div id="shadowCast"></div>
                    </section>
                  </div>
                  <div class="panel-wrap dark footer">
                    <section class="panel">
                    </section>
                  </div>
      </div>
    </div>
    <div class="footer-nav"></div>
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script src="/js/TweenMax.min.js"></script>
    <script src="/js/main.lib.js"></script>
    <script src="/js/magicVial-0.6.2.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/5.0.4/firebase-database.js"></script>
    <script src="/js/firebase-init.js"></script>
    <script src="/js/app.js"></script>
    <script src="/js/scout-record-0.0.3.js"></script>
    <script>
      magicVial('form#signup', "Sorry, please fix the errors below.");
      
      $('form#signup [type="submit"]').click((e) => {
      	e.preventDefault();
      	var email = $('form#signup [type="email"]').val();
      	var password = $('form#signup [type="password"]').val();
      	firebase.auth().createUserWithEmailAndPassword(email, password).catch(function(error) {
      		// Handle Errors here.
      		var errorCode = error.code;
      		var errorMessage = error.message;
      		if (error.code) {
      			alert("You have an error!");
      		}
      	});
      });
      
      $('.scout .name').click(function(e) {
      	if ($('#selectAll').hasClass('show')) {
      		$('#selectAll').removeClass('show');
      		$('.scout .name').removeClass('selected');
      		$('.shadow-progress-bar').removeClass('selected');
      		$('.progress-bar').removeClass('selected');
      		$(this).addClass('selected');
      		$('[data-owner="'+ $(this).attr('data-name') +'"]').addClass('selected');
      	}
      	else if ($(this).hasClass('selected')) {
      		$(this).removeClass('selected');
      		$('.shadow-progress-bar').removeClass('selected');
      		$('.progress-bar').removeClass('selected');
      	}
      	else {
      		$('.scout .name').removeClass('selected');
      		$('.shadow-progress-bar').removeClass('selected');
      		$('.progress-bar').removeClass('selected');
      		$(this).addClass('selected');
      		$('[data-owner="'+ $(this).attr('data-name') +'"]').addClass('selected');
      	}
      });
      $('#selectAll').click(function() {
      	if ($(this).hasClass('show') && $('.scout .name.selected').length > 0) {
      		$(this).removeClass('show');
      		$('.scout .name').removeClass('selected');
      		$('.shadow-progress-bar').removeClass('selected');
      		$('.progress-bar').removeClass('selected');
      	}
      	else {
      		$(this).addClass('show');
      		$('.scout .name').addClass('selected');
      		$('.shadow-progress-bar').addClass('selected');
      		$('.progress-bar').addClass('selected');
      	}
      });
      
      $('form').each(function() {
      	magicVial('form#' + $(this).attr('id'), "Sorry, please fix the errors below.");
      });
      
      function sortKeys(obj) {
      	var ordered = {};
      	Object.keys(obj).sort().forEach(function(key) {
      		ordered[key] = obj[key];
      	});
      	return ordered;
      }
      
      Object.size = function(obj) {
      	var size = 0, key;
      	for (key in obj) {
      		if (obj.hasOwnProperty(key)) size++;
      	}
      	return size;
      };
      
      function compare(a,b) {
      	let comparison = 0, x, y;
      
      	if (a.match(/[a-z]/i) && b.match(/[a-z]/i)) {
      		x = a;
      		y = b;
      	}
      	else {
      		x = parseInt(a.replace(/[a-z]/g, ''));
      		y = parseInt(b.replace(/[a-z]/g, ''));
      	}
      
      	if (x > y) {
      		comparison = 1;
      	} else if (y > x) {
      		comparison = -1;
      	}
      
      	return comparison;
      }
      
      $('#keysTrigger').click(function() {
      	$(this).toggleClass('show');
      	$('#progressWrapper').toggleClass('show-keys');
      });
      
      $('.modal-trigger').not('.completed').click(function() {
      	e.preventDefault();
      });
      
      $('#progressWrapper').delegate('.fragment', 'click', function(e) {
      	var owner = $(this).parent().attr('data-owner');
      	var rank = $(this).attr('data-rank');
      	var requirement = $(this).attr('data-requirement');
      	$('#modalWindow .requirement-status').attr('data-owner', owner);
      	$('#modalWindow .requirement-status').attr('data-rank', rank);
      	$('#modalWindow .requirement-status').attr('data-requirement', requirement);
      	$('#modalWindow .requirement-status').removeClass('has-completed');
      	$('#modalWindow .requirement-status').text('Mark as completed');
      	if ($(this).hasClass('completed')) {
      		$('#modalWindow .requirement-status').addClass('has-completed');
      		$('#modalWindow .requirement-status').text('Completed');
      	}
      	var titleLayout = $(this).attr('data-rank') +' <span class="semi">'+ $(this).attr('data-requirement') +'</span>';
      	$('#modalWindow h3').html(titleLayout);
      	var desc = "";
      	for (var i = 0; i < record.ranks.length; i++) {
      		if (record.ranks[i].name === rank) {
      			desc = record.ranks[i].requirements[requirement];
      			break;
      		}
      	}
      	$('#modalWindow .rank-content').html(desc);
      	if ($('#selectAll').hasClass('show')) {
      		if ($(this).hasClass('completed')) {
      			$(this).removeClass('completed');
      		}
      		else {
      			$(this).addClass('completed');
      		}
      		toggleRequirement(window.dataObj, owner, rank, requirement);
      		writeUserData(window.database, window.dataObj);
      	}
      });
      
      //- $('body').delegate('.requirement-status', 'click', function() {
      //- 	console.log('tesdting')
      //- 	if (!$(this).not('.has-completed')) {
      //- 		$(this).addClass('has-completed');
      //- 		$(this).text('Completed');
      //- 	}
      //- });
    </script>
  </body>
</html>